spring.application.name=backend

# Configuracion de la Base de Datos MariaDB
# FIX: REVERTIDA la URL. El intento de establecer 'wsrep_on' causó un error fatal de conexión.
spring.datasource.url=jdbc:mariadb://localhost:3336/recetas_db
# Se recomienda gestionar las credenciales de la base de datos a través de variables de entorno
# para evitar exponerlas en el control de versiones.
# Ejemplo de configuración de variables de entorno:
# export DB_USERNAME=your_username
# export DB_PASSWORD=your_password
# Los valores por defecto (root, 123456) se usarán si las variables no están definidas.
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:123456}
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver

# Para activar un perfil, se puede usar la variable de entorno SPRING_PROFILES_ACTIVE
# o pasar un argumento al ejecutar la aplicación: --spring.profiles.active=dev
# Se establece 'dev' como perfil por defecto si no se especifica ninguno.
spring.profiles.active=dev

# Configuracion de JPA/Hibernate
# La propiedad 'spring.jpa.hibernate.ddl-auto' se gestiona en los perfiles
# especificos de cada entorno (ej. application-dev.properties).
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MariaDBDialect

# Configuracion de Flyway
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
# Mantenemos esta corrección para evitar el conflicto de esquema inicial.
spring.flyway.baseline-version=1
# Configuración para manejar tablas existentes
spring.flyway.validate-on-migrate=true
spring.flyway.clean-disabled=true

# Se deshabilita la inicialización del esquema de Spring Session por parte de Spring Boot.
# Flyway se encargará de gestionar todas las migraciones de la base de datos, incluidas las tablas de sesión.
spring.session.jdbc.initialize-schema=never

# Deshabilitar Open-in-View
spring.jpa.open-in-view=false

# Configuracion de Logs
logging.level.org.springframework=WARN
logging.level.org.hibernate=ERROR
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql=TRACE
